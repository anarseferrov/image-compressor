(this["webpackJsonpimage-compressor"]=this["webpackJsonpimage-compressor"]||[]).push([[0],{13:function(e,t,a){e.exports=a(21)},18:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),i=a.n(l),u=(a(18),a(4)),c=a.n(u),o=a(8),s=a(1),m=a(2),p=a(9),h=a(10),g=a(3),b=a(12),d=a(11),O=(a(20),a(5)),E=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).compressImage=e.compressImage.bind(Object(g.a)(e)),e.handleChange=e.handleChange.bind(Object(g.a)(e)),e.state={maxSizeMB:1,maxWidthOrHeight:1024,webWorker:{progress:null,inputSize:null,outputSize:null,inputUrl:null,outputUrl:null},mainThread:{progress:null,inputSize:null,outputSize:null,inputUrl:null,outputUrl:null}},e}return Object(h.a)(a,[{key:"handleChange",value:function(e){var t=this;return function(a){t.setState(Object(m.a)({},e,a.currentTarget.value))}}},{key:"onProgress",value:function(e,t){var a=t?"webWorker":"mainThread";this.setState((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(m.a)({},a,Object(s.a)(Object(s.a)({},t[a]),{},{progress:e})))}))}},{key:"compressImage",value:function(){var e=Object(o.a)(c.a.mark((function e(t,a){var n,r,l,i,u=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],console.log("input",n),e.t0=console,e.next=5,O.a.getExifOrientation(n);case 5:return e.t1=e.sent,e.t0.log.call(e.t0,"ExifOrientation",e.t1),r=a?"webWorker":"mainThread",this.setState((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(m.a)({},r,Object(s.a)(Object(s.a)({},e[r]),{},{inputSize:(n.size/1024/1024).toFixed(2),inputUrl:URL.createObjectURL(n)})))})),l={maxSizeMB:this.state.maxSizeMB,maxWidthOrHeight:this.state.maxWidthOrHeight,useWebWorker:a,onProgress:function(e){return u.onProgress(e,a)}},e.next=12,Object(O.a)(n,l);case 12:i=e.sent,console.log("output",i),this.setState((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(m.a)({},r,Object(s.a)(Object(s.a)({},e[r]),{},{outputSize:(i.size/1024/1024).toFixed(2),outputUrl:URL.createObjectURL(i)})))}));case 15:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.webWorker,n=t.mainThread,l=t.maxSizeMB,i=t.maxWidthOrHeight;return r.a.createElement("div",{className:"App"},r.a.createElement("div",null,"Options:",r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"maxSizeMB"},"maxSizeMB:"," ",r.a.createElement("input",{type:"number",id:"maxSizeMB",name:"maxSizeMB",value:l,onChange:this.handleChange("maxSizeMB")})),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"maxWidthOrHeight"},"maxWidthOrHeight:"," ",r.a.createElement("input",{type:"number",id:"maxWidthOrHeight",name:"maxWidthOrHeight",value:i,onChange:this.handleChange("maxWidthOrHeight")})),r.a.createElement("hr",null),r.a.createElement("label",{htmlFor:"web-worker"},"Compress in web-worker"," ",a.progress&&r.a.createElement("span",null,a.progress," %"),r.a.createElement("input",{id:"web-worker",type:"file",accept:"image/*",onChange:function(t){return e.compressImage(t,!0)}})),r.a.createElement("p",null,a.inputSize&&r.a.createElement("span",null,"Source image size: ",a.inputSize," mb"),a.outputSize&&r.a.createElement("span",null,", Output image size: ",a.outputSize))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"main-thread"},"Compress in main-thread"," ",n.progress&&r.a.createElement("span",null,n.progress," %"),r.a.createElement("input",{id:"main-thread",type:"file",accept:"image/*",onChange:function(t){return e.compressImage(t,!1)}})),r.a.createElement("p",null,n.inputSize&&r.a.createElement("span",null,"Source image size: ",n.inputSize," mb"),n.outputSize&&r.a.createElement("span",null,", Output image size: ",n.outputSize))),(n.inputUrl||a.inputUrl)&&r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"input preview"),r.a.createElement("td",null,"output preview"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("img",{src:n.inputUrl||a.inputUrl,alt:"input"})),r.a.createElement("td",null,r.a.createElement("img",{src:n.outputUrl||a.outputUrl,alt:"output"}))))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.8e62e986.chunk.js.map